{
  "topology": "**网络架构概述：**\n本网络拓扑由两个自治系统构成，DeviceA位于AS 65008，DeviceB、DeviceC和DeviceD位于AS 65009，通过BGP协议实现跨AS路由交换。\n\n**AS 65008网络详情：**\n- DeviceA作为边界路由器，配置Router-ID为1.1.1.1\n- LoopBack0接口：1.1.1.1/32\n- GigabitEthernet1/0/0接口：172.16.0.1/16（内网段）\n- GigabitEthernet2/0/0接口：192.168.0.1/24（与AS 65009互联段）\n\n**AS 65009网络详情：**\n- DeviceB（Router-ID：2.2.2.2）：\n  - LoopBack0：2.2.2.2/32\n  - GigabitEthernet1/0/0：10.1.1.1/24（连接DeviceD）\n  - GigabitEthernet2/0/0：192.168.0.2/24（连接DeviceA，EBGP链路）\n  - GigabitEthernet3/0/0：10.1.3.1/24（连接DeviceC）\n\n- DeviceC（Router-ID：3.3.3.3）：\n  - LoopBack0：3.3.3.3/32\n  - GigabitEthernet2/0/0：10.1.2.1/24（连接DeviceD）\n  - GigabitEthernet3/0/0：10.1.3.2/24（连接DeviceB）\n\n- DeviceD（Router-ID：4.4.4.4）：\n  - LoopBack0：4.4.4.4/32\n  - GigabitEthernet1/0/0：10.1.1.2/24（连接DeviceB）\n  - GigabitEthernet2/0/0：10.1.2.2/24（连接DeviceC）\n\n**协议配置：**\n- EBGP：DeviceA（192.168.0.1）与DeviceB（192.168.0.2）建立EBGP邻居关系\n- IBGP：AS 65009内部采用全网状IBGP连接，DeviceB、DeviceC、DeviceD之间通过LoopBack接口建立IBGP邻居关系\n- IGP：AS 65009内部运行OSPF协议，所有设备的LoopBack和物理接口均宣告在Area 0中，确保IBGP邻居的连通性\n\n**关键特性：**\n- DeviceB作为AS 65009的边界路由器，负责路由引入和跨AS路由传递\n- AS 65009采用三角形物理拓扑提供冗余路径\n- IBGP使用LoopBack接口建立邻居，增强连接稳定性\n- 通过import-route direct命令将直连路由引入BGP，实现路由重分发",
  "requirement": "AS之间需要相互交换本AS内部的路由，由于AS内路由器数量众多，路由数量较大且变化频繁，需要使用BGP协议高效传递大量路由并节约带宽。",
  "steps": [
    "在DeviceB、DeviceC、DeviceD之间配置IGP连接（OSPF）。",
    "在DeviceB、DeviceC、DeviceD之间配置IBGP连接。",
    "在DeviceA和DeviceB之间配置EBGP连接。",
    "在DeviceA上通过`network`命令发布路由。",
    "在DeviceB上配置BGP引入直连路由。"
  ],
  "configs": {
    "DeviceA": "#\nsysname DeviceA\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 172.16.0.1 255.255.0.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.0.1 255.255.255.0\n#\ninterface LoopBack0\n ip address 1.1.1.1 255.255.255.255\n#\nbgp 65008\n router-id 1.1.1.1\n peer 192.168.0.2 as-number 65009\n#\n ipv4-family unicast\n  undo synchronization\n  network 172.16.0.0 255.255.0.0\n  peer 192.168.0.2 enable\n#\nreturn",
    "DeviceB": "#\nsysname DeviceB\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.1 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 192.168.0.2 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 10.1.3.1 255.255.255.0\n#\ninterface LoopBack0\n ip address 2.2.2.2 255.255.255.255\n#\nbgp 65009\n router-id 2.2.2.2\n peer 3.3.3.3 as-number 65009\n peer 3.3.3.3 connect-interface LoopBack0\n peer 4.4.4.4 as-number 65009\n peer 4.4.4.4 connect-interface LoopBack0\n peer 192.168.0.1 as-number 65008\n#\n ipv4-family unicast\n  undo synchronization\n  import-route direct\n  peer 3.3.3.3 enable\n  peer 4.4.4.4 enable\n  peer 192.168.0.1 enable\n#\nospf 1\n area 0.0.0.0\n  network 2.2.2.2 0.0.0.0\n  network 10.1.1.0 0.0.0.255\n  network 10.1.3.0 0.0.0.255\n#\nreturn",
    "DeviceC": "#\nsysname DeviceC\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.2.1 255.255.255.0\n#\ninterface GigabitEthernet3/0/0\n undo shutdown\n ip address 10.1.3.2 255.255.255.0\n#\ninterface LoopBack0\n ip address 3.3.3.3 255.255.255.255\n#\nbgp 65009\n router-id 3.3.3.3\n peer 2.2.2.2 as-number 65009\n peer 2.2.2.2 connect-interface LoopBack0\n peer 4.4.4.4 as-number 65009\n peer 4.4.4.4 connect-interface LoopBack0\n#\n ipv4-family unicast\n  undo synchronization\n  peer 2.2.2.2 enable\n  peer 4.4.4.4 enable\n#\nospf 1\n area 0.0.0.0\n  network 3.3.3.3 0.0.0.0\n  network 10.1.2.0 0.0.0.255\n  network 10.1.3.0 0.0.0.255\n#\nreturn",
    "DeviceD": "#\nsysname DeviceD\n#\ninterface GigabitEthernet1/0/0\n undo shutdown\n ip address 10.1.1.2 255.255.255.0\n#\ninterface GigabitEthernet2/0/0\n undo shutdown\n ip address 10.1.2.2 255.255.255.0\n#\ninterface LoopBack0\n ip address 4.4.4.4 255.255.255.255\n#\nbgp 65009\n router-id 4.4.4.4\n peer 2.2.2.2 as-number 65009\n peer 2.2.2.2 connect-interface LoopBack0\n peer 3.3.3.3 as-number 65009\n peer 3.3.3.3 connect-interface LoopBack0\n#\n ipv4-family unicast\n  undo synchronization\n  peer 2.2.2.2 enable\n  peer 3.3.3.3 enable\n#\nospf 1\n area 0.0.0.0\n  network 4.4.4.4 0.0.0.0\n  network 10.1.1.0 0.0.0.255\n  network 10.1.2.0 0.0.0.255\n#\nreturn"
  },
  "related_images": [
    "图1-143 配置BGP 基本组网图.png"
  ]
}