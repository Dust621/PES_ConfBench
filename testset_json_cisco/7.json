{
  "topology": "四台路由器 R1、R2 在 AS1000 内部，R3 在 AS1000 与 R4（AS1100）之间。R3 与 R4 链接 203.0.113.0/30。R1 附属网络 10.0.1.0/24，R4 附属网络 10.0.4.0/24。",
  "requirement": "AS1000 内 R1、R2、R3 使用 OSPF area 0。R3 与 R4 建立 eBGP 邻居（R3 属于 AS1000，R4 属于 AS1100）。要求 R1 网络在 AS1100 可见，AS1100 的网络在 AS1000 可见，同时在边界处对通告前缀做简单筛选（仅通告 10.0.4.0/24）。",
  "verification": "在 R3 上 show ip bgp neighbors 显示 Established；在 R1 ping 10.0.4.1 成功；在 R4 ping 10.0.1.1 成功。",
  "verification_tasks": [
    {
      "type": "ospf_area_contains",
      "area": "0",
      "nodes": [
        "R1",
        "R2",
        "R3"
      ],
      "description": "AS1000 内三台在 area 0"
    },
    {
      "type": "bgp_session_between",
      "a_node": "R3",
      "b_node": "R4",
      "expect": "ESTABLISHED",
      "description": "R3↔R4 eBGP 建立"
    },
    {
      "type": "bgp_advertised_contains",
      "node": "R4",
      "to_neighbor": "R3",
      "prefix": "10.0.4.0/24",
      "description": "R4 仅向 R3 通告 10.0.4.0/24"
    },
    {
      "type": "bgp_received_only",
      "node": "R3",
      "from_neighbor": "R4",
      "allowed_prefixes": [
        "10.0.4.0/24"
      ],
      "deny_others": true,
      "description": "R3 从 R4 接收的前缀仅为 10.0.4.0/24（过滤生效）"
    },
    {
      "type": "route_exists",
      "node": "R1",
      "prefix": "10.0.4.0/24",
      "description": "AS1000 内部可见 AS1100 的目标前缀"
    },
    {
      "type": "reachability",
      "src_node": "R1",
      "dst_ip": "10.0.4.1",
      "description": "R1 可达 R4 主机"
    },
    {
      "type": "reachability",
      "src_node": "R4",
      "dst_ip": "10.0.1.1",
      "description": "R4 可达 R1 主机"
    }
  ]
}