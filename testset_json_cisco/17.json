{
  "topology": "三个自治系统线性连接：AS 10-DeviceA、AS 20-DeviceB、AS 30-DeviceC。DeviceA（10.1.2.1/24）通过eBGP连接DeviceB（10.1.2.2/24），DeviceB（10.1.3.1/24）通过eBGP连接DeviceC（10.1.3.2/24）。DeviceA还有本地网络10.5.1.0/24。",
  "requirement": "配置BGP团体属性实现路由传播控制。DeviceA与DeviceB、DeviceB与DeviceC分别建立eBGP邻居。DeviceA通过network命令发布10.5.1.0/24网段，并通过route-policy设置no-export团体属性。DeviceB接收到带no-export团体属性的路由后，不应将其传播给其他AS（DeviceC）。实现AS 10的路由只在AS 20内传播，不泄露到AS 30。",
  "verification": "验证所有eBGP会话为Established状态；验证DeviceB学到10.5.1.0/24路由；验证DeviceC未学到10.5.1.0/24路由（no-export团体属性生效）；验证DeviceB可达10.5.1.0/24网段。",
  "verification_tasks": [
    { "type": "bgp_session_between", "a_node": "DeviceA", "b_node": "DeviceB", "expect": "ESTABLISHED", "description": "DeviceA(AS 10)与DeviceB(AS 20)的eBGP邻居" },
    { "type": "bgp_session_between", "a_node": "DeviceB", "b_node": "DeviceC", "expect": "ESTABLISHED", "description": "DeviceB(AS 20)与DeviceC(AS 30)的eBGP邻居" },
    { "type": "bgp_rib_contains", "node": "DeviceA", "prefix": "10.5.1.0/24", "description": "DeviceA应有自己发布的路由" },
    { "type": "bgp_rib_contains", "node": "DeviceB", "prefix": "10.5.1.0/24", "description": "DeviceB应学到AS 10的路由" },
    { "type": "bgp_received_only", "node": "DeviceC", "allowed_prefixes": ["10.1.2.0/24", "10.1.3.0/24"], "description": "DeviceC不应学到带no-export的10.5.1.0/24路由" },
    { "type": "reachability", "src_node": "DeviceB", "dst_ip": "10.5.1.1", "description": "DeviceB可达DeviceA的本地网络" }
  ]
}
