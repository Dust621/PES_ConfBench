{
  "topology": "两个自治系统AS 65008和AS 65009。AS 65008包含DeviceA，连接内网192.168.1.0/24。AS 65009包含DeviceB和DeviceC。DeviceA（172.16.1.2/24）与DeviceB（172.16.1.1/24）通过eBGP互联。DeviceB（10.1.1.1/24）与DeviceC（10.1.1.2/24）通过OSPF互联，DeviceC还连接内网10.1.2.0/24。",
  "requirement": "配置BGP与IGP（OSPF）的路由重分发。DeviceA与DeviceB建立eBGP邻居，DeviceA通过network命令发布192.168.1.0/24。AS 65009内部运行OSPF area 0。DeviceB作为AS边界路由器，将OSPF路由引入BGP（import-route ospf），将BGP路由引入OSPF（import-route bgp），实现跨AS路由互通。",
  "verification": "验证DeviceA-DeviceB的eBGP会话为Established；验证DeviceB-DeviceC的OSPF邻居关系正常；验证DeviceA的BGP RIB中有AS 65009的内部路由；验证DeviceC的路由表中有192.168.1.0/24（从BGP重分发到OSPF）；验证跨AS可达性。",
  "verification_tasks": [
    { "type": "bgp_session_between", "a_node": "DeviceA", "b_node": "DeviceB", "expect": "ESTABLISHED", "description": "DeviceA(AS 65008)与DeviceB(AS 65009)的eBGP邻居" },
    { "type": "ospf_neighbor_count", "node": "DeviceB", "expect": 1, "description": "DeviceB应与DeviceC建立OSPF邻居" },
    { "type": "ospf_neighbor_count", "node": "DeviceC", "expect": 1, "description": "DeviceC应与DeviceB建立OSPF邻居" },
    { "type": "ospf_area_contains", "area": "0", "nodes": ["DeviceB", "DeviceC"], "description": "DeviceB和DeviceC在OSPF area 0" },
    { "type": "bgp_rib_contains", "node": "DeviceA", "prefix": "10.1.1.0/24", "description": "DeviceA应学到AS 65009的OSPF网段" },
    { "type": "bgp_rib_contains", "node": "DeviceA", "prefix": "10.1.2.0/24", "description": "DeviceA应学到AS 65009的OSPF网段" },
    { "type": "route_exists", "node": "DeviceC", "network": "192.168.1.0/24", "description": "DeviceC路由表应有192.168.1.0/24（BGP重分发到OSPF）" },
    { "type": "reachability", "src_node": "DeviceA", "dst_ip": "10.1.2.1", "description": "DeviceA可达DeviceC的内网接口" },
    { "type": "reachability", "src_node": "DeviceC", "dst_ip": "192.168.1.1", "description": "DeviceC可达DeviceA的内网接口" }
  ]
}
